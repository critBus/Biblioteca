{% extends "admin/change_list.html" %}
{% load static %}

{% block object-tools %}
    <div class="object-tools">
        <div style="margin-bottom: 10px; background-color: #f8f9fa; padding: 10px; border-radius: 4px;">
            {% if ultimo_inventario %}
                <strong>Última actualización:</strong> {{ ultimo_inventario.fecha|date:"d/m/Y" }}
            {% else %}
                <strong>No hay actualizaciones previas</strong>
            {% endif %}
        </div>
        <a href="{% url 'admin:actualizar-inventario' %}" class="button btn  btn-high btn-success">
            Actualizar Inventario
        </a>
    </div>
{% endblock %}

{% block content %}

<div class="inventario-container">
    
    <!-- Tabla de Libros -->
    <div class="inventario-section">
        <h2>Libros en Inventario</h2>
        <table>
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Autor</th>
                    <th>Editorial</th>
                    <th>Copias</th>
                </tr>
            </thead>
            <tbody>
                {% for libro in libros %}
                <tr>
                    <td>{{ libro.titulo }}</td>
                    <td>{{ libro.autor }}</td>
                    <td>{{ libro.editorial }}</td>
                    <td>{{ libro.numero_copias }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Tabla de Revistas -->
    <div class="inventario-section">
        <h2>Revistas en Inventario</h2>
        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Editorial</th>
                    <th>Número</th>
                    <th>Copias</th>
                </tr>
            </thead>
            <tbody>
                {% for revista in revistas %}
                <tr>
                    <td>{{ revista.nombre }}</td>
                    <td>{{ revista.editorial }}</td>
                    <td>{{ revista.numero }}</td>
                    <td>{{ revista.numero_copias }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Tabla de Mobiliario -->
    <div class="inventario-section">
        <h2>Mobiliario en Inventario</h2>
        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Ubicación</th>
                    <th>Estado</th>
                    <th>Cantidad</th>
                </tr>
            </thead>
            <tbody>
                {% for mueble in mobiliarios %}
                <tr>
                    <td>{{ mueble.nombre_tipoMueble }}</td>
                    <td>{{ mueble.ubicacion }}</td>
                    <td>{{ mueble.estado }}</td>
                    <td>{{ mueble.cantidad }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Tabla de Materiales Audiovisuales -->
    <div class="inventario-section">
        <h2>Materiales Audiovisuales en Inventario</h2>
        <table>
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Creador</th>
                    <th>Formato</th>
                    <th>Copias</th>
                </tr>
            </thead>
            <tbody>
                {% for material in materiales_audiovisuales %}
                <tr>
                    <td>{{ material.titulo }}</td>
                    <td>{{ material.creador }}</td>
                    <td>{{ material.formato }}</td>
                    <td>{{ material.numero_copias }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
